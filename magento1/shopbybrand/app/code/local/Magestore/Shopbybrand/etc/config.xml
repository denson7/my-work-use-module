<?xml version="1.0"?>
<!--
/**
 * Magestore
 * 
 * NOTICE OF LICENSE
 * 
 * This source file is subject to the Magestore.com license that is
 * available through the world-wide-web at this URL:
 * http://www.magestore.com/license-agreement.html
 * 
 * DISCLAIMER
 * 
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 * 
 * @category    Magestore
 * @package     Magestore_Shopbybrand
 * @copyright   Copyright (c) 2012 Magestore (http://www.magestore.com/)
 * @license     http://www.magestore.com/license-agreement.html
 */
-->
<config>
    <modules>
        <Magestore_Shopbybrand>
            <!--edit by cuong-->
            <version>4.2.0</version>
            <!--end edit by cuong-->
        </Magestore_Shopbybrand>
    </modules>
    <frontend>
        <routers>
            <shopbybrand>
                <use>standard</use>
                <args>
                    <module>Magestore_Shopbybrand</module>
                    <frontName>brand</frontName>
                </args>
            </shopbybrand>
        </routers>
        <layout>
            <updates>
                <shopbybrand>
                    <file>shopbybrand.xml</file>
                </shopbybrand>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Shopbybrand>
                    <files>
                        <default>Magestore_Shopbybrand.csv</default>
                    </files>
                </Magestore_Shopbybrand>
            </modules>
        </translate>
        <events>
            <catalog_product_collection_before_add_count_to_categories>
                <observers>
                    <catalog_product_collection_load_before>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>catalog_product_collection_load_before</method>
                    </catalog_product_collection_load_before>
                </observers>
            </catalog_product_collection_before_add_count_to_categories>
            <catalog_product_collection_load_before>
                <observers>
                    <catalog_product_collection_load_before>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>catalog_product_collection_load_before</method>
                    </catalog_product_collection_load_before>
                </observers>
            </catalog_product_collection_load_before>
            <catalog_category_load_after>
                <observers>
                    <catalog_category_load_after>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>catalog_category_load_after</method>
                    </catalog_category_load_after>
                </observers>
            </catalog_category_load_after>
			<controller_action_predispatch_shopbybrand_index_view>
                <observers>
                    <controller_action_predispatch_shopbybrand_index_view>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>setLayerBrand</method>
                    </controller_action_predispatch_shopbybrand_index_view>
                </observers>
            </controller_action_predispatch_shopbybrand_index_view> 
	</events>
    </frontend>
    <admin>
        <routers>
            <brandadmin>
                <use>admin</use>
                <args>
                    <module>Magestore_Shopbybrand</module>
                    <frontName>brandadmin</frontName>
                </args>
            </brandadmin>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <shopbybrand>
                    <file>shopbybrand.xml</file>
                </shopbybrand>
            </updates>
        </layout>
        <translate>
            <modules>
                <Magestore_Shopbybrand>
                    <files>
                        <default>Magestore_Shopbybrand.csv</default>
                    </files>
                </Magestore_Shopbybrand>
            </modules>
        </translate>
        <events>
            <!--edit by cuong-->
            <catalog_entity_attribute_save_before>
                <observers>
                    <shopbybrand_observers_init_routers>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>brandAttributeUpate</method>
                    </shopbybrand_observers_init_routers>
                </observers>
            </catalog_entity_attribute_save_before>
            <catalog_entity_attribute_save_after>
                <observers>
                    <shopbybrand_observers_init_routers>
                        <type>model</type>
			<class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>brandUpdateOptionId</method>
                    </shopbybrand_observers_init_routers>
                </observers>
            </catalog_entity_attribute_save_after>
            <!--end edit by cuong-->
            <!--controller_action_predispatch_adminhtml_catalog_product_attribute_save>
                <observers>
                    <shopbybrand_observers_init_routers>
                        <type>model</type>
                                                <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>updateBrand</method>
                    </shopbybrand_observers_init_routers>
                </observers>
            </controller_action_predispatch_adminhtml_catalog_product_attribute_save-->
            <catalog_product_save_before>
                <observers>
                    <shopbybrand_observers_product_save>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>saveAdminProduct</method>
                    </shopbybrand_observers_product_save>
                </observers>
            </catalog_product_save_before>
            <catalog_product_save_after>
                <observers>
                    <shopbybrand_observers_product_save>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>saveAdminProductAfter</method>
                    </shopbybrand_observers_product_save>
                </observers>
            </catalog_product_save_after>
            <catalog_product_attribute_update_before>
                <observers>
                    <shopbybrand_observers_attribute_update>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>productUpdateAttribute</method>
                    </shopbybrand_observers_attribute_update>
                </observers>
            </catalog_product_attribute_update_before>
            <catalog_category_save_before>
                <observers>
                    <shopbybrand_observers_category_save>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>categoryAdminSave</method>
                    </shopbybrand_observers_category_save>
                </observers>
            </catalog_category_save_before>
            <admin_system_config_changed_section_shopbybrand>
                <observers>
                    <shopbybrand_observers_save_config>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>configChange</method>
                    </shopbybrand_observers_save_config>
                </observers>
            </admin_system_config_changed_section_shopbybrand>
            <controller_action_predispatch_adminhtml_system_config_edit>
                <observers>
                    <shopbybrand_observers_goto_config>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>gotoConfig</method>
                    </shopbybrand_observers_goto_config>
                </observers>
            </controller_action_predispatch_adminhtml_system_config_edit>
        </events>
    </adminhtml>   
    <global>
        <models>
            <shopbybrand>
                <class>Magestore_Shopbybrand_Model</class>
                <resourceModel>shopbybrand_mysql4</resourceModel>
            </shopbybrand>
            <shopbybrand_mysql4>
                <class>Magestore_Shopbybrand_Model_Mysql4</class>
                <entities>
                    <!--add by cuong-->
                    <brandproducts>
                        <table>brand_products</table>
                    </brandproducts>
                    <!--end add by cuong-->
                    <brand>
                        <table>brand</table>
                    </brand>
                    <brandvalue>
                        <table>brand_store_value</table>
                    </brandvalue>
                    <urlrewrite>
                        <table>core_url_rewrite</table>
                    </urlrewrite>
                    <!--                    <brandsubscriber>
                        <table>brand_subscriber</table>
                    </brandsubscriber>-->
                    <subscriber>
                        <table>newsletter_subscriber</table>
                    </subscriber>
                </entities>
            </shopbybrand_mysql4>
        </models>
        <resources>
            <shopbybrand_setup>
                <setup>
                    <module>Magestore_Shopbybrand</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </shopbybrand_setup>
            <shopbybrand_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </shopbybrand_write>
            <shopbybrand_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </shopbybrand_read>
        </resources>
        <blocks>
            <shopbybrand>
                <class>Magestore_Shopbybrand_Block</class>
            </shopbybrand>
            <magenotification>
                <rewrite>
                    <config_extensionkeys>Magestore_Shopbybrand_Block_Magenotification_Extensionkeys</config_extensionkeys>
                </rewrite>
            </magenotification>
        </blocks>
        <helpers>
            <shopbybrand>
                <class>Magestore_Shopbybrand_Helper</class>
            </shopbybrand>
        </helpers>
        <events>
            <controller_front_init_routers>
                <observers>
                    <shopbybrand_observers_init_routers>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Controller_Router</class>
                        <method>initControllerRouters</method>
                    </shopbybrand_observers_init_routers>
                </observers>
            </controller_front_init_routers>
            <!--edit by Cuong-->
            <!-- khai bao bat event de sap xep-->
            <catalog_block_product_list_collection>
                <observers>
                    <shopbybrand_observers_sortbybrandposition>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>sortbybrandposition</method>
                    </shopbybrand_observers_sortbybrandposition>
                </observers>
            </catalog_block_product_list_collection>
            <catalog_product_import_finish_before>
                <observers>
                    <shopbybrand_observers_reconvertData>
                        <type>model</type>
                        <class>Magestore_Shopbybrand_Model_Observer</class>
                        <method>reconvertData</method>
                    </shopbybrand_observers_reconvertData>
                </observers>
            </catalog_product_import_finish_before>
            <page_block_html_topmenu_gethtml_before>
                <observers>
                    <shopbybrand_observers_addToTopmenu>
                        <class>shopbybrand/observer</class>
                        <method>addToTopmenu</method>
                    </shopbybrand_observers_addToTopmenu>
                </observers>
            </page_block_html_topmenu_gethtml_before>
            <!--end edit by cuong-->
        </events>
        <index>
            <indexer>
                <product>
                    <model>shopbybrand/indexer_product</model>
                </product>
                <url>
                    <model>shopbybrand/indexer_url</model>
                </url>
            </indexer>
        </index>
    </global>
    <default>
        <shopbybrand>
            <general>
                <enable>1</enable>
                <toplink>1</toplink>
                <router>brand</router>
                <attribute_code>manufacturer</attribute_code>
                <brand_extended_search>name</brand_extended_search>
                <number_brand_top>20</number_brand_top>
                <number_product_on_row>3</number_product_on_row>
                <display_brandnavigation>1</display_brandnavigation>
                <maximum_item_brandnavigation>15</maximum_item_brandnavigation>
            </general>
            <optional>
                <display_featured_brand>1</display_featured_brand>
                <display_brand_image>1</display_brand_image>
                <display_brand_have_product>0</display_brand_have_product>
                <display_brand_categories>1</display_brand_categories>
                <display_brand_signup>1</display_brand_signup>
                <display_shopby>1</display_shopby>
                <display_brand_maxreview>10</display_brand_maxreview>
                <display_brand_view_search>1</display_brand_view_search>
                <display_brand_list_search>1</display_brand_list_search>
                <display_brand_by_category>1</display_brand_by_category>
                <display_sidebar>1</display_sidebar>
                <maximum_item_sidebar>10</maximum_item_sidebar>
                
            </optional>
            <!--add by cuong-->
            <brand_list>
                <display_brand_image>1</display_brand_image>
                <display_brand_group_by_name>0</display_brand_group_by_name>
                <display_brand_have_product>0</display_brand_have_product>
                <display_product_number>0</display_product_number>
                <display_featured_brand>1</display_featured_brand>
                <show_featured_brand_as_slider>0</show_featured_brand_as_slider>
                <show_number_of_slide>4</show_number_of_slide>
                <display_brand_category>1</display_brand_category>
                <display_brand_character_list>1</display_brand_character_list>
                <display_brand_search_box>1</display_brand_search_box>
                <brand_logo_width>125</brand_logo_width>
                <brand_logo_height>125</brand_logo_height>
            </brand_list>
            
            
            <brand_detail>
                <display_logo>1</display_logo>
                <brand_detail_template>page/2columns-left.phtml</brand_detail_template>
                <brand_products_per_row>4</brand_products_per_row>
                <display_brandbanner>1</display_brandbanner>
                <display_brandlogo>1</display_brandlogo>
                <display_brand_featured_products>1</display_brand_featured_products>
                <display_brand_instant_search>1</display_brand_instant_search>
                <display_brand_bestseller_products>1</display_brand_bestseller_products>
                <display_brand_shop_by_option>1</display_brand_shop_by_option>
                <brand_instant_search_position>1</brand_instant_search_position>
                <brand_shop_by_option_position>2</brand_shop_by_option_position>
                <brand_bestseller_products_position>3</brand_bestseller_products_position>
                <bestseller_products_number_show>5</bestseller_products_number_show>
                <display_brand_categories>0</display_brand_categories>
            </brand_detail>
            
            <!--end add by cuong-->
            <template>
                <brand_listing>default</brand_listing>
            </template>
            <!-- add by Peter-->
            <sidebar>
                <brand_sidebar>1</brand_sidebar>
                <maximum_item_sidebar>5</maximum_item_sidebar>
                <option_display>0</option_display>
            </sidebar>
            <!-- end add by Peter-->
            
            <feature_brand_flexibebox>
                <display_featured_brand>1</display_featured_brand>
                <show_featured_brand_as_slider>1</show_featured_brand_as_slider>
            </feature_brand_flexibebox>
            <style_config>
                <background_title>FFA500</background_title>
                <brand_title_color>FFFFFF</brand_title_color>
                <background-filter-label>3399CC</background-filter-label>
                <color-filter-label>FFFFFF</color-filter-label>
                <background-filter-link>eeeeee</background-filter-link>
                <color-link-fitler>707070</color-link-fitler>
                <background-filter-link-hover>6f6f6f</background-filter-link-hover>
                <color-filter-link-hover>ffffff</color-filter-link-hover>
                <color-link>3399CC</color-link>
                <color-link-hover>6f6f6f</color-link-hover>
            </style_config>
        </shopbybrand>
    </default>
</config>