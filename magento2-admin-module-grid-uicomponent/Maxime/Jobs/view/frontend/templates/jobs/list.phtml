<?php
/**
 * Created by PhpStorm.
 * User: denson
 * Date: 16-8-5
 * Time: 上午11:52
 */
$jobCollection = $this->getLoadedJobCollection();
//打印出sql语句
//echo $jobCollection->getSelect().'';
//或者
//echo $jobCollection->getSelect()->__toString();
$iterator = 1;
$total = $jobCollection->count();

?>

<div class="job-wrapper">
    <ol class="jobs list">
        <?php foreach($jobCollection AS $job): ?>
            <li class="item<?php echo ($iterator == 1) ? ' first' : ''; ?><?php echo ($total == $iterator) ? ' last' : ''; ?>">
                <div class="title">
                    <a href="<?php echo $this->getJobUrl($job); ?>" title="<?php echo $job->getTitle(); ?>">
                        <?php echo $job->getTitle(); ?>
                    </a>
                </div>
                <div class="department_name">
                    <?php echo __('Department : '); ?>
                    <a href="<?php echo $this->getDepartmentUrl($job); ?>" title="<?php echo $job->getDepartmentName(); ?>">
                        <?php echo $job->getDepartmentName(); ?>
                    </a>
                </div>
                <div class="type"><?php echo $job->getType(); ?></div>
                <div class="location"><?php echo $job->getLocation(); ?></div>
                <div class="date"><?php echo $this->formatDate($job->getDate()); ?></div>
                <div class="description"><?php echo $job->getDescription(); ?></div>
            </li>
            <?php $iterator++; ?>
        <?php endforeach; ?>
    </ol>
</div>